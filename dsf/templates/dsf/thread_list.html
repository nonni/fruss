{% extends "dsf/base.html" %}
{% load thread_filters thread_tags %}
{% block content %}
<table id="threads">
    <tr>
        <td>Tags</td>
        <td>Title</td>
        <td>Posts</td>
        <td>Info</td>
    </tr>
    {% for thread in threads.object_list %}
        <tr>
            <td>{{ thread.category }}</td>
            <td><a href="{% url thread thread.id %}">{{ thread.title }}</a></td>
            <td>{{ thread|post_count }}</td>
             {% get_thread_post thread.id as tp  %}
             <td> {{ tp.pub_date|timesince|upper  }} ago <br />
                 by {{ tp.author }}</td>
             <td>{{ thread|redchord|escape|striptags }}</td>
        </tr>
        {% endfor %}
    </table>

    <div class="pagination">
        {% if threads.has_previous %}
            <a href="?page={{ threads.previous_page_number }}">Previous</a>
        {% endif %} 
        {% for page in threads.paginator.page_range %}
            {% ifequal threads.number page %}
                {{ page }} 
            {% else %}
                <a href="?page={{ page }}">{{ page }}</a>
            {% endifequal %}
        {% endfor %}
        {% if threads.has_next %}
            <a href="?page={{ threads.next_page_number }}">Next</a>
        {% endif %}
    </div>
{% endblock content %}
