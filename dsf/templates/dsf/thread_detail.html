{% extends "dsf/base.html" %}
{% load thread_tags %}
{% block head %}
{{ block.super }}
<link rel="stylesheet" href="/media/css/thread_details.css" />
{% endblock head %}

{% block breadcrumbs %}
    <ul id="crumbs">
        <li><a href="{% url threads %}">Forum name</a></li>
        <li><a href="{% url category_threads thread.category %}">{{ thread.category }}</a></li>
        <li>{{ thread.title }}</li>
    </ul>
{% endblock breadcrumbs %}

{% block content %}
<div id="thread_head">
    <h1>{{ thread.title  }} <div style="float:right">page {{ posts.number }} of {{ posts.paginator.num_pages }}</div></h1>
</div>
{% for post in posts.object_list %}
<div id="post_{{post.id}}" class="rounded_style {% cycle odd,even%}">
    <div class="info">
        <ul>
            <li>{{ post.author }}</li>
            <li> {% gravatar user %} </li>
            <li>{{ post.pub_date|date:"D d M Y H:i" }}</li>
        </ul>
    </div>
    <p>
    {{ post.body }}
    </p>
</div>
{% endfor %}

<div class="pagination">
    {% if posts.has_previous %}
        <a href="?page={{ posts.previous_page_number }}">Previous</a>
    {% endif %} 
    {% for page in posts.paginator.page_range %}
        {% ifequal posts.number page %}
            {{ page }} 
        {% else %}
            <a href="?page={{ page }}">{{ page }}</a>
        {% endifequal %}
    {% endfor %}
    {% if posts.has_next %}
        <a href="?page={{ posts.next_page_number }}">Next</a>
    {% endif %}
</div>

<div class="new_reply rounded_style">
    <form action="." method="POST">
        <div class="form-row">
            {{ form.body.errors }}
            {{ form.body.label_tag }}
            {{ form.body }}
        </div>
        <div class="submit-row">
            <input type="submit" value="Submit" />
        </div>
    </form>
</div>

{% endblock content %}
